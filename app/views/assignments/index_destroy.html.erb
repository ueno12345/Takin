<%# TA候補削除画面を表示する． %>
<% if flash[:color] == "red" %>
  <div class="red-text"><%= flash[:notice] %></div>
<% elsif flash[:color] == "green" %>
  <div class="green-text"><%= flash[:notice] %></div>
<% else %>
  <div><%= flash[:notice] %></div>
<% end %>
<h1>TA候補削除</h1>

<form class="row g-3">
  <%= search_form_for @q, html: {class:"row g-3"} do |f| %>
    <div class="col-md-4">
      <%= f.label :year_eq, "対象年度" %>
      <%= f.select :year_eq, @select_years, {prompt:"対象年度を選択"} %>
    </div>
    <div class="col-md-4">
      <%= f.label :name_i_cont, "TA名" %>
      <%= f.search_field :name_i_cont, placeholder: "条件を入力してください" %>
    </div>
    <div class="col-md-4">
      <%= f.label :number_i_cont, "学生番号" %>
      <%= f.search_field :number_i_cont, placeholder: "条件を入力してください" %>
    </div>
    <div class="col-md-4">
      <%= f.label :grade_i_cont, "学年" %>
      <%= f.search_field :grade_i_cont, placeholder: "条件を入力してください" %>
    </div>
    <div class="col-md-4">
      <%= f.label :labo_i_cont, "研究室" %>
      <%= f.search_field :labo_i_cont, placeholder: "条件を入力してください" %>
    </div>
    <div class="col-md-4">
      <%= f.label :description_i_cont, "備考" %>
      <%= f.search_field :description_i_cont, placeholder: "条件を入力してください" %>
    </div>
    <div class="col-12">
      <%= f.submit "検索", class: "btn btn-primary" %>
    </div>
  <% end %>
</form>

<%= form_tag index_destroy_course_assignments_path(@course), method: :delete, data: {turbo_confirm: "選択したTAを削除した場合、選択したTAの割り当て時間も消えてしまいますが、本当に削除しますか?"} do %>
  <%= submit_tag '選択したTAをすべて候補から削除' %>

  <table class="table table-bordered">
    <thead class="table-primary">
      <tr>
      <th>TA候補者選択</th>
      <th>対象年度</th>
      <th>TA名</th>
      <th>学生番号</th>
      <th>学年</th>
      <th>研究室</th>
      <th>備考</th>
      </tr>
    </thead>
    <tbody>
      <div id="teaching_assistants">
        <% @teaching_assistants.each do |teaching_assistant| %>
          <tr>
            <% if teaching_assistant.id == 1 %>
              <% next %>
            <% else %>
              <td>
                <%= check_box_tag 'teaching_assistant_ids[]', teaching_assistant.id %>
              </td>
              <td>
                <%= teaching_assistant.year %>
              </td>
              <td>
                <%= teaching_assistant.name %>
              </td>
              <td>
                <%= teaching_assistant.number %>
              </td>
              <td>
                <%= teaching_assistant.grade %>
              </td>
              <td>
                <%= teaching_assistant.labo %>
              </td>
              <td>
                <%= teaching_assistant.description%>
              </td>
            <% end %>
          </tr>
        <% end %>
      </div>
    </tbody>
  </table>
<% end %>
